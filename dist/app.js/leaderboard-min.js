const base_url="https://imdcurrency.herokuapp.com";localStorage.getItem("token")||(window.location.href="../login/login.html"),primus=Primus.connect(base_url,{reconnect:{max:1/0,min:500,retries:10}});let updateLeaderboard=()=>{fetch(base_url+"/api/v1/leaderboard",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>e.json()).then(e=>{document.querySelector(".list").innerHTML="",appendScore(e)}).catch(e=>{console.log(e)})};updateLeaderboard(),primus.on("data",e=>{"updated balance counter"===e.action&&updateLeaderboard()});let appendScore=e=>{e.data.forEach(e=>{if(1===e.place)var a=`<div class="list__row">\n                <p class="score score--gold">${e.place}</p>\n                <p class="score list__name">${e.fullname}</p>\n                <p class="score list__balance">${e.balance}</p>\n            </div>`;else if(2===e.place)a=`<div class="list__row">\n                <p class="score score--silver">${e.place}</p>\n                <p class="score list__name">${e.fullname}</p>\n                <p class="score list__balance">${e.balance}</p>\n            </div>`;else if(3===e.place)a=`<div class="list__row">\n                <p class="score score--bronze">${e.place}</p>\n                <p class="score list__name">${e.fullname}</p>\n                <p class="score list__balance">${e.balance}</p>\n            </div>`;else a=`<div class="list__row">\n                <p class="score">${e.place}</p>\n                <p class="score list__name">${e.fullname}</p>\n                <p class="score list__balance">${e.balance}</p>\n            </div>`;document.querySelector(".list").insertAdjacentHTML("beforeend",a)})};